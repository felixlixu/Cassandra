package org.apache.cassandra.gms;

import java.net.InetAddress;
import java.util.concurrent.ConcurrentMap;

import org.cliffc.high_scale_lib.NonBlockingHashMap;

public class Gossiper implements IFailureDetectionEventListener,GossiperMBean {
	
	public static Gossiper instance=new Gossiper();
	private final ConcurrentMap<InetAddress,Integer> versions=new NonBlockingHashMap<InetAddress,Integer>();
	
	public Integer getVersion(InetAddress address) {
		Integer v=versions.get(address);
		if(v==null){
			logger.trace("Assuming current protocol version for {}", address);
            return MessagingService.version_;			
		}else{
			return v;
		}
	}
}
